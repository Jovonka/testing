<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Trace Slider Reveal</title>
<style>
body, html {
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family: "Georgia", serif;
  background: rgb(255, 255, 255);
  overflow:hidden;
}
/* Hamburger */
.hamburger {
  position:absolute; top:2vh; left:2vw; width:35px; height:30px; cursor:pointer;
  display:flex; flex-direction:column; justify-content:space-between; z-index:999;
}
.hamburger div { height:4px; background:#a64b00; border-radius:2px; transition:0.3s; }
.hamburger.open div:nth-child(1) { transform: rotate(45deg) translate(5px,6px); }
.hamburger.open div:nth-child(2) { opacity:0; }
.hamburger.open div:nth-child(3) { transform: rotate(-45deg) translate(6px,-6px); }

.side-menu {
  position:fixed; top:0; left:-250px; width:220px; height:100%;
  background: rgba(255,255,255,0.9); box-shadow: 2px 0 10px rgba(0,0,0,0.1);
  backdrop-filter: blur(6px); transition:left 0.3s; display:flex; flex-direction:column;
  padding-top:60px; z-index:998;
}
.side-menu.open { left:0; }
.side-menu a {
  text-decoration:none; color:#a64b00; font-size:1.2rem;
  padding:15px 20px; border-bottom:1px solid rgba(0,0,0,0.05);
}
.side-menu a:hover { background: rgba(255,204,103,0.3); }

canvas {
  display:block;
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:100%;
}

.verse {
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  font-size:1.5rem;
  color:#4b2800;
  text-align:center;
  opacity:0;
  transition:opacity 1s ease;
  width:80%;
  pointer-events:none;
}
.verse.visible { opacity:1; }
</style>
</head>
<body>

<div class="hamburger" id="hamburger"><div></div><div></div><div></div></div>
<nav class="side-menu" id="sideMenu">
  <a href="index.html">Page 1</a>
  <a href="page2.html">Page 2</a>
  <a href="page3.html">Page 3</a>
  <a href="page4.html">Page 4</a>
</nav>

<canvas id="canvas"></canvas>
<div class="verse" id="verse">
  But in my distress I cried out to the Lord; yes, I prayed to my God for help.<br>
  He heard me from his sanctuary; my cry to him reached his ears.<br>
  <strong>Psalm 18:6</strong>
</div>

<script>
/* Hamburger */
const hamburger = document.getElementById('hamburger');
const sideMenu = document.getElementById('sideMenu');
hamburger.addEventListener('click', ()=>{
  hamburger.classList.toggle('open');
  sideMenu.classList.toggle('open');
});

/* Trace Slider */
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');

let dragging = false;
let progress = 0;
let pathPoints = [];

function generatePath() {
  pathPoints = [];
  const w = canvas.width;
  const h = canvas.height;
  const numPoints = 200;
  for(let i=0;i<=numPoints;i++){
    const t = i/numPoints;
    const x = t * w;
    // Keep path always centered vertically
    const y = h/2 + Math.sin(t*10)*h/8 + Math.sin(t*5)*h/16;
    pathPoints.push({x,y});
  }
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  if(progress<1){
    ctx.beginPath();
    ctx.moveTo(pathPoints[0].x, pathPoints[0].y);
    for(let i=1;i<pathPoints.length;i++){
      ctx.lineTo(pathPoints[i].x, pathPoints[i].y);
    }
    ctx.strokeStyle = '#ccc';
    ctx.lineWidth = 70;
    ctx.stroke();

    const maxIdx = Math.floor(progress*(pathPoints.length-1));
    if(maxIdx>0){
      ctx.beginPath();
      ctx.moveTo(pathPoints[0].x, pathPoints[0].y);
      for(let i=1;i<=maxIdx;i++){
        ctx.lineTo(pathPoints[i].x, pathPoints[i].y);
      }
      ctx.strokeStyle = '#a64b00';
      ctx.lineWidth = 70;
      ctx.stroke();
    }
  }

  requestAnimationFrame(draw);
}

function distance(p1,p2){
  return Math.hypot(p1.x-p2.x, p1.y-p2.y);
}

function updateProgress(x,y){
  for(let i=0;i<pathPoints.length;i++){
    if(distance({x,y}, pathPoints[i]) < 30){
      progress = Math.max(progress, i/(pathPoints.length-1));
      if(progress >= 1){
        document.getElementById('verse').classList.add('visible');
      }
    }
  }
}

// Events
canvas.addEventListener('mousedown',()=>dragging=true);
canvas.addEventListener('mouseup',()=>dragging=false);
canvas.addEventListener('mouseleave',()=>dragging=false);
canvas.addEventListener('mousemove', e=>{ if(dragging) updateProgress(e.clientX,e.clientY); });
canvas.addEventListener('touchstart',()=>dragging=true);
canvas.addEventListener('touchend',()=>dragging=false);
canvas.addEventListener('touchmove', e=>{
  if(dragging){
    const t = e.touches[0];
    updateProgress(t.clientX, t.clientY);
  }
});

// Resize
function resizeCanvas(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  generatePath();
}
window.addEventListener('resize', resizeCanvas);
resizeCanvas();
draw();
</script>

</body>
</html>
